{% load static %}<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Probase</title>
	<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
	<link rel="stylesheet" href="{% static 'css/main.css' %}">
  </head>
  <body>

	<nav class="navbar navbar-expand{% if user.is_authenticated %}-md{% endif %} navbar-dark bg-dark">
	  <div class="container-fluid">
		<a class="navbar-brand" href="{% url 'home' %}">Probase</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mainMenu" aria-controls="mainMenu" aria-expanded="false" aria-label="Toggle navigation">
		  <span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="mainMenu">
		  {% if user.is_authenticated %}
			<ul class="navbar-nav mr-auto ml-md-3">
			{% url 'my_problems' as url_mine %}
			{% url 'all_problems' as url_all %}
			{% url 'manage_users' as url_manage %}
			{% if user.is_writer or user.is_staff %}
			  <li class="nav-item">
				  <a class="nav-link {% if request.get_full_path == url_mine %}active{% endif %}" href="{% url 'my_problems' %}">My Problems</a>
			  </li>
			{% endif %}
			{% if user.is_solver or user.is_staff %}
			  <li class="nav-item">
				<a class="nav-link {% if request.get_full_path == url_all %}active{% endif %}" href="{% url 'all_problems' %}">All Problems</a>
			  </li>
			{% endif %}
			{% if user.is_staff %}
			  <li class="nav-item">
				<a class="nav-link {% if request.get_full_path == url_manage %}active{% endif %}" href="{% url 'manage_users' %}">Manage Users</a>
			  </li>
			{% endif %}
			{% if user.is_staff or user.is_solver or user.is_writer %}
			  <li class="nav-item">
				<a class="nav-link {% if request.get_full_path == url_manage %}active{% endif %}" href="{% url 'manage_users' %}">Create Test</a>
			  </li>
			{% endif %}
			</ul>

			<ul class="navbar-nav ml-auto">
			  <li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" href="#" id="userMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				  {{ user }}
				</a>
				<div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenu">
				  <a class="dropdown-item" href="{% url 'change_password' %}">Change password</a>
				  <div class="dropdown-divider"></div>
				  <a class="dropdown-item" href="{% url 'logout' %}">Log out</a>
				</div>
			  </li>
			</ul>
		  {% else %}
			<form class="form-inline ml-auto">
			  <a href="{% url 'login' %}" class="btn btn-outline-light">Log in</a>
			  <a href="{% url 'signup' %}" class="btn btn-primary ml-2">Sign up</a>
			</form>
		  {% endif %}
		</div>
	  </div>
	</nav>

    <div class="container-md mt-4">
      {% block content %}
      {% endblock %}
    </div>

	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.3.1/bootstrap.min.js" crossorigin="anonymous"></script>
	<script>
	MathJax = {
	  tex: {
		inlineMath: [['$', '$'], ['\\(', '\\)']]
	  },
	  svg: {
		fontCache: 'global'
	  }
	};
	</script>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </body>
</html>
